<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="alternate" type="application/rss+xml" title="sontek&#x27;s Engineering Blog" href="/rss.xml"/><title>Wiping an AWS Account with aws-nuke</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/ea1a16cd18ea3355.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ea1a16cd18ea3355.css" data-n-g=""/><link rel="preload" href="/_next/static/css/64ba3ccddea2bd5f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/64ba3ccddea2bd5f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-2a9c662ddd7329fb.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e535547a4fdaa691.js" defer=""></script><script src="/_next/static/chunks/996-9e3c12b77542c098.js" defer=""></script><script src="/_next/static/chunks/790-a3aa35eb62ec874e.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...id%5D-6f0b09377c6319d5.js" defer=""></script><script src="/_next/static/4b2g4jvUO3oHg0CC-JYye/_buildManifest.js" defer=""></script><script src="/_next/static/4b2g4jvUO3oHg0CC-JYye/_ssgManifest.js" defer=""></script><script src="/_next/static/4b2g4jvUO3oHg0CC-JYye/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><div class="grid"><div class="col"><header id="banner" class="body"><h1><a href="/">sontek.net</a></h1></header></div><div class="col menu"><nav><ul><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li><a href="/resume">Resume</a></li><li><a href="/about">About</a></li></ul></nav></div></div><div class="container"><article class="blog_article__NoEy4"><div class="util_lightText__xcqUE">Published on <time dateTime="2023-06-22T00:00:00Z">June 22, 2023</time></div><h1 class="util_headingXl__knZ_h">Wiping an AWS Account with aws-nuke</h1><div class="util_lightText__xcqUE">Tagged with: <a class="blog_tag__RvKKS" href="/blog/tags/AWS">AWS</a><a class="blog_tag__RvKKS" href="/blog/tags/DevOps">DevOps</a><a class="blog_tag__RvKKS" href="/blog/tags/SRE">SRE</a></div><div><p>When you're an SRE/DevOps engineer you'll end up making AWS accounts and
create a lot of cruft in your sandbox and development accounts. AWS
does not make it easy to clear these up but there is a tool called
<a href="https://github.com/rebuy-de/aws-nuke">aws-nuke</a> that will do it for you!</p>
<h1>Safe Guards</h1>
<p>aws-nuke has a few safeguards in place to prevent inadvertent data loss.
The first of which is it requires you to alias the targetted account. I
like to put <code>nuke</code> in the alias to make it clear.</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">aws</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">iam</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">create-account-alias</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--account-alias</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">nuke-</span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">accoun</span><span style="color: #ADBAC7">t</span><span style="color: #F47067">></span></span></code></pre></div>
<p>The second safe-guard is the config takes a key called <code>account-blocklist</code>
that will guarantee nuke will not run against it no matter what.</p>
<p>The final safety switch it has is it will not take any action by default,
it will only execute a dry-run.   You need to run the CLI with
<code>--no-dry-run</code> if you want it to take action.</p>
<h1>Getting Started</h1>
<p>You configure <code>aws-nuke</code> with YAML, so the first step is to define that:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="" data-theme="default"><code data-language="" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #adbac7">regions:</span></span>
<span data-line=""><span style="color: #adbac7">  - us-east-1</span></span>
<span data-line=""><span style="color: #adbac7">  - global</span></span>
<span data-line=""><span style="color: #adbac7"></span></span>
<span data-line=""><span style="color: #adbac7">account-blocklist:</span></span>
<span data-line=""><span style="color: #adbac7">  - "888888888888" # production</span></span>
<span data-line=""><span style="color: #adbac7"></span></span>
<span data-line=""><span style="color: #adbac7">accounts:</span></span>
<span data-line=""><span style="color: #adbac7">  "777777777777": {} # nuke-&#x3C;account></span></span></code></pre></div>
<p>This will prevent us from nuking our production account and target all resources
in the account we actually want to nuke.</p>
<p>You might want to have it nuke <em>ALL REGIONS</em> in AWS since you may not know which
regions resources are deployed in.   To do this you can query the regions from AWS:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">❯</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">aws</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ec2</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">describe-regions</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--all-regions</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--query</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"Regions[*].RegionName"</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--output</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">text</span><span style="color: #ADBAC7"> </span><span style="color: #F47067">|</span><span style="color: #ADBAC7"> </span><span style="color: #F69D50">xargs</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-n</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">1</span><span style="color: #ADBAC7"> </span><span style="color: #F47067">|</span><span style="color: #ADBAC7"> </span><span style="color: #F69D50">sort</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">af-south-1</span></span>
<span data-line=""><span style="color: #F69D50">ap-east-1</span></span>
<span data-line=""><span style="color: #F69D50">ap-northeast-1</span></span>
<span data-line=""><span style="color: #F69D50">ap-northeast-2</span></span>
<span data-line=""><span style="color: #F69D50">ap-northeast-3</span></span>
<span data-line=""><span style="color: #F69D50">ap-south-1</span></span>
<span data-line=""><span style="color: #F69D50">ap-south-2</span></span>
<span data-line=""><span style="color: #F69D50">ap-southeast-1</span></span>
<span data-line=""><span style="color: #F69D50">ap-southeast-2</span></span>
<span data-line=""><span style="color: #F69D50">ap-southeast-3</span></span>
<span data-line=""><span style="color: #F69D50">ap-southeast-4</span></span>
<span data-line=""><span style="color: #F69D50">ca-central-1</span></span>
<span data-line=""><span style="color: #F69D50">eu-central-1</span></span>
<span data-line=""><span style="color: #F69D50">eu-central-2</span></span>
<span data-line=""><span style="color: #F69D50">eu-north-1</span></span>
<span data-line=""><span style="color: #F69D50">eu-south-1</span></span>
<span data-line=""><span style="color: #F69D50">eu-south-2</span></span>
<span data-line=""><span style="color: #F69D50">eu-west-1</span></span>
<span data-line=""><span style="color: #F69D50">eu-west-2</span></span>
<span data-line=""><span style="color: #F69D50">eu-west-3</span></span>
<span data-line=""><span style="color: #F69D50">me-central-1</span></span>
<span data-line=""><span style="color: #F69D50">me-south-1</span></span>
<span data-line=""><span style="color: #F69D50">sa-east-1</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span></span>
<span data-line=""><span style="color: #F69D50">us-east-2</span></span>
<span data-line=""><span style="color: #F69D50">us-west-1</span></span>
<span data-line=""><span style="color: #F69D50">us-west-2</span></span></code></pre></div>
<p>Which would give you an updated config of:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">regions</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">global</span><span style="color: #ADBAC7">  </span><span style="color: #768390"># Global resources like IAM</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">af-south-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-east-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-northeast-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-northeast-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-northeast-3</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-south-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-south-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-southeast-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-southeast-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-southeast-3</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ap-southeast-4</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">ca-central-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-central-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-central-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-north-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-south-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-south-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-west-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-west-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">eu-west-3</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">me-central-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">me-south-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">sa-east-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">us-east-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">us-east-2</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">us-west-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">us-west-2</span></span></code></pre></div>
<p>I personally don't recommend targetting all AWS regions at the same time.  It
will generate a lot of output and be slow.  You could do it if necessary but
most people only have a few regions they use and so they can set those directly.
For example it, maybe you only use <code>us-</code> based regions?</p>
<p>So lets run the dry-run and see what it wants to nuke:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">❯</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">aws-nuke</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-c</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">nuke.yaml</span></span></code></pre></div>
<p>This should output something like:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">Do</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">you</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">really</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">want</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">to</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">nuke</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">the</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">account</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">with</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">the</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ID</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">777777777777</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">and</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">the</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">alias</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">'nuke-sandbox'?</span></span>
<span data-line=""><span style="color: #F69D50">Do</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">you</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">want</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">to</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">continue?</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Enter</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">account</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">alias</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">to</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">continue.</span></span>
<span data-line=""><span style="color: #F47067">></span><span style="color: #ADBAC7"> nuke-sandbox</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2Subnet</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">subnet-0cd9975a443a6304b</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultForAz: </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">DefaultVPC:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">OwnerID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"777777777777"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2Subnet</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">subnet-0be39d02e399a371c</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultForAz: </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">DefaultVPC:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">OwnerID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"777777777777"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2Subnet</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">subnet-02d7017bd4730ea63</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultForAz: </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">DefaultVPC:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">OwnerID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"777777777777"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2Subnet</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">subnet-0ec04b28c32708ab2</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultForAz: </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">DefaultVPC:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">OwnerID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"777777777777"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2Subnet</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">subnet-0eea1b4be084840ed</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultForAz: </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">DefaultVPC:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">OwnerID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"777777777777"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2Subnet</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">subnet-05a294cc04736012e</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultForAz: </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">DefaultVPC:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"true",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">OwnerID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"777777777777"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2RouteTable</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">rtb-0abda0e94015064ca</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultVPC: </span><span style="color: #96D0FF">"true"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2DefaultSecurityGroupRule</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">sgr-0368525f77bf566ac</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [SecurityGroupId: </span><span style="color: #96D0FF">"sg-0a59900b52ced5e10"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2DefaultSecurityGroupRule</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">sgr-0890a837ed6148729</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [SecurityGroupId: </span><span style="color: #96D0FF">"sg-0a59900b52ced5e10"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">EC2InternetGatewayAttachment</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">igw-0acfb474f1fd71375</span><span style="color: #ADBAC7"> -</span><span style="color: #F47067">></span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">vpc-0be5d310ab44c239a</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [DefaultVPC: </span><span style="color: #96D0FF">"true"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">us-east-1</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">SQSQueue</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">https://sqs.us-east-1.amazonaws.com/777777777777/example-sqs</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">global</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">IAMSAMLProvider</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">arn:aws:iam::777777777777:saml-provider/AWSSSO_254abb4071f10b25_DO_NOT_DELETE</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">global</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">IAMOpenIDConnectProvider</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">arn:aws:iam::777777777777:oidc-provider/app.terraform.io</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [Arn: </span><span style="color: #96D0FF">"arn:aws:iam::777777777777:oidc-provider/app.terraform.io"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">global</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">IAMPolicy</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">arn:aws:iam::777777777777:policy/tfc-agent-access-policy</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [ARN: </span><span style="color: #96D0FF">"arn:aws:iam::777777777777:policy/tfc-agent-access-policy",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Name:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"tfc-agent-access-policy",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Path:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"/",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">PolicyID:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"ANPA2T6PZOBNWI76TKQRF"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">global</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">IAMRole</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">tfc-agent</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [CreateDate: </span><span style="color: #96D0FF">"2023-04-02T17:55:23Z",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">LastUsedDate:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"2023-06-22T13:45:02Z",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Name:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"tfc-agent",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Path:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"/"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">global</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">IAMRolePolicyAttachment</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">tfc-agent</span><span style="color: #ADBAC7"> -</span><span style="color: #F47067">></span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">tfc-agent-access-policy</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> [PolicyArn: </span><span style="color: #96D0FF">"arn:aws:iam::777777777777:policy/tfc-agent-access-policy",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">PolicyName:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"tfc-agent-access-policy",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">RoleCreateDate:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"2023-04-02T17:55:23Z",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">RoleLastUsed:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"2023-06-22T13:45:02Z",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">RoleName:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"tfc-agent",</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">RolePath:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"/"]</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">remove</span></span>
<span data-line=""><span style="color: #F69D50">Scan</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">complete:</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">85</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">total,</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">19</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">nukeable,</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">66</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">filtered.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">The</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">above</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">resources</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">would</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">be</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">deleted</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">with</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">the</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">supplied</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">configuration.</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Provide</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--no-dry-run</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">to</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">actually</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">destroy</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">resources.</span></span></code></pre></div>
<p>This is great, it fully scanned the account and found every resource to delete!
It even wants to delete the DefaultVPC which is usually a good idea.  The one
resource that should catch your eye that you probably do not want to delete:</p>
<ul>
<li><code>arn:aws:iam::777777777777:saml-provider/AWSSSO_254abb4071f10b25_DO_NOT_DELETE</code></li>
</ul>
<p>AWS clearly doesn't want us to delete that!</p>
<h1>Filters</h1>
<p>To prevent nuke from deleting resources you want to keep you can define presets
that you use on each account.  So with our SSO example we want to prevent it
from deleting those resources in a preset.</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">presets</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">sso</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">filters</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMSAMLProvider</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"regex"</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"AWSSSO_.*_DO_NOT_DELETE"</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMRole</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"glob"</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"AWSReservedSSO_*"</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMRolePolicyAttachment</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"glob"</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"AWSReservedSSO_*"</span></span></code></pre></div>
<p>You can see in this example I'm targetting specific resource types and then
matching them with both <code>regex</code> and <code>glob</code> filter types. These are super
powerful but a lot of times the simpler filters can be used.  I start with
<code>contains</code> filter and then go from there:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">contains</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">AWSReservedSSO</span></span></code></pre></div>
<p>Then the other thing you may have noticed is that I was repeating
<code>AWSReservedSSO</code> multiple times.  To reduce that you can use standard YAML
anchors.   So the final config for your preset would look like this:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">presets</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">sso</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">filters</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">_DEFAULT_FILTERS</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">&#x26;</span><span style="color: #F69D50">DEFAULT</span></span>
<span data-line=""><span style="color: #ADBAC7">        - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"contains"</span></span>
<span data-line=""><span style="color: #ADBAC7">          </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"DO_NOT_DELETE"</span></span>
<span data-line=""><span style="color: #ADBAC7">        - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"contains"</span></span>
<span data-line=""><span style="color: #ADBAC7">          </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"AWSReservedSSO"</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMSAMLProvider</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">*</span><span style="color: #ADBAC7">DEFAULT</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMRole</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">*</span><span style="color: #ADBAC7">DEFAULT</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMRolePolicyAttachment</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">*</span><span style="color: #ADBAC7">DEFAULT</span></span></code></pre></div>
<p>Now we can use that preset in our accounts configuration:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">accounts</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #96D0FF">"777777777777"</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">"presets"</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #96D0FF">sso</span></span></code></pre></div>
<p>So your final config should look something like this:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">regions</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">us-east-1</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">global</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #8DDB8C">account-blocklist</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #96D0FF">"888888888888"</span><span style="color: #ADBAC7"> </span><span style="color: #768390"># production</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color: #8DDB8C">presets</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">sso</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">filters</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">_DEFAULT_FILTERS</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">&#x26;</span><span style="color: #F69D50">DEFAULT</span></span>
<span data-line=""><span style="color: #ADBAC7">        - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"contains"</span></span>
<span data-line=""><span style="color: #ADBAC7">          </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"DO_NOT_DELETE"</span></span>
<span data-line=""><span style="color: #ADBAC7">        - </span><span style="color: #8DDB8C">type</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"contains"</span></span>
<span data-line=""><span style="color: #ADBAC7">          </span><span style="color: #8DDB8C">value</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">"AWSReservedSSO"</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMSAMLProvider</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">*</span><span style="color: #ADBAC7">DEFAULT</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMRole</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">*</span><span style="color: #ADBAC7">DEFAULT</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">IAMRolePolicyAttachment</span><span style="color: #ADBAC7">: </span><span style="color: #F47067">*</span><span style="color: #ADBAC7">DEFAULT</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #8DDB8C">accounts</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #96D0FF">"777777777777"</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">"presets"</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #96D0FF">sso</span></span></code></pre></div>
<p>When you run this you should see now the resources we want to keep are filtered
out:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">global</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">IAMSAMLProvider</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">arn:aws:iam::777777777777:saml-provider/AWSSSO_254abb4071f10b25_DO_NOT_DELETE</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">-</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">filtered</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">by</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">config</span></span></code></pre></div>
<p>Once you are ready and have your filters in place you can run it for real!</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">❯</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">aws-nuke</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-c</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">nuke.yaml</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--no-dry-run</span></span></code></pre></div>
<h1>Next steps</h1>
<p>One final note about it is that it does not understand the relationship between
resources and so it could try deleting an EBS volume that is still in use by an
EC2 instance.  There isn't a great solution for this outside of running nuke a
few times.</p>
<p>The tool is well documented and so you can find the rest of information going to
<a href="https://github.com/rebuy-de/aws-nuke">https://github.com/rebuy-de/aws-nuke</a>!</p></div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":["2023","nuking_aws_account"],"path":"2023/nuking_aws_account","contentHtml":"\u003cp\u003eWhen you're an SRE/DevOps engineer you'll end up making AWS accounts and\ncreate a lot of cruft in your sandbox and development accounts. AWS\ndoes not make it easy to clear these up but there is a tool called\n\u003ca href=\"https://github.com/rebuy-de/aws-nuke\"\u003eaws-nuke\u003c/a\u003e that will do it for you!\u003c/p\u003e\n\u003ch1\u003eSafe Guards\u003c/h1\u003e\n\u003cp\u003eaws-nuke has a few safeguards in place to prevent inadvertent data loss.\nThe first of which is it requires you to alias the targetted account. I\nlike to put \u003ccode\u003enuke\u003c/code\u003e in the alias to make it clear.\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eaws\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eiam\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecreate-account-alias\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--account-alias\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enuke-\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaccoun\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003et\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe second safe-guard is the config takes a key called \u003ccode\u003eaccount-blocklist\u003c/code\u003e\nthat will guarantee nuke will not run against it no matter what.\u003c/p\u003e\n\u003cp\u003eThe final safety switch it has is it will not take any action by default,\nit will only execute a dry-run.   You need to run the CLI with\n\u003ccode\u003e--no-dry-run\u003c/code\u003e if you want it to take action.\u003c/p\u003e\n\u003ch1\u003eGetting Started\u003c/h1\u003e\n\u003cp\u003eYou configure \u003ccode\u003eaws-nuke\u003c/code\u003e with YAML, so the first step is to define that:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"\" data-theme=\"default\"\u003e\u003ccode data-language=\"\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003eregions:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003e  - us-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003e  - global\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003eaccount-blocklist:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003e  - \"888888888888\" # production\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003eaccounts:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #adbac7\"\u003e  \"777777777777\": {} # nuke-\u0026#x3C;account\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis will prevent us from nuking our production account and target all resources\nin the account we actually want to nuke.\u003c/p\u003e\n\u003cp\u003eYou might want to have it nuke \u003cem\u003eALL REGIONS\u003c/em\u003e in AWS since you may not know which\nregions resources are deployed in.   To do this you can query the regions from AWS:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e❯\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaws\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eec2\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003edescribe-regions\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--all-regions\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--query\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"Regions[*].RegionName\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--output\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003etext\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003exargs\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-n\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003esort\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eaf-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-northeast-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-northeast-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-northeast-3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-south-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-southeast-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-southeast-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-southeast-3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eap-southeast-4\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eca-central-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-central-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-central-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-north-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-south-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-west-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-west-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eeu-west-3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eme-central-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eme-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003esa-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-west-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-west-2\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWhich would give you an updated config of:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eregions\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #768390\"\u003e# Global resources like IAM\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaf-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-northeast-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-northeast-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-northeast-3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-south-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-southeast-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-southeast-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-southeast-3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eap-southeast-4\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eca-central-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-central-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-central-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-north-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-south-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-west-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-west-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eeu-west-3\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eme-central-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eme-south-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esa-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eus-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eus-east-2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eus-west-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eus-west-2\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eI personally don't recommend targetting all AWS regions at the same time.  It\nwill generate a lot of output and be slow.  You could do it if necessary but\nmost people only have a few regions they use and so they can set those directly.\nFor example it, maybe you only use \u003ccode\u003eus-\u003c/code\u003e based regions?\u003c/p\u003e\n\u003cp\u003eSo lets run the dry-run and see what it wants to nuke:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e❯\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaws-nuke\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-c\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enuke.yaml\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis should output something like:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eDo\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eyou\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ereally\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewant\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enuke\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaccount\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewith\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eID\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e777777777777\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eand\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ealias\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e'nuke-sandbox'?\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eDo\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eyou\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewant\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtinue?\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEnter\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaccount\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ealias\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtinue.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e nuke-sandbox\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2Subnet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esubnet-0cd9975a443a6304b\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultForAz: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDefaultVPC:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eOwnerID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2Subnet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esubnet-0be39d02e399a371c\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultForAz: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDefaultVPC:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eOwnerID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2Subnet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esubnet-02d7017bd4730ea63\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultForAz: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDefaultVPC:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eOwnerID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2Subnet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esubnet-0ec04b28c32708ab2\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultForAz: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDefaultVPC:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eOwnerID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2Subnet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esubnet-0eea1b4be084840ed\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultForAz: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDefaultVPC:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eOwnerID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2Subnet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esubnet-05a294cc04736012e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultForAz: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDefaultVPC:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eOwnerID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2RouteTable\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ertb-0abda0e94015064ca\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultVPC: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2DefaultSecurityGroupRule\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esgr-0368525f77bf566ac\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [SecurityGroupId: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"sg-0a59900b52ced5e10\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2DefaultSecurityGroupRule\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esgr-0890a837ed6148729\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [SecurityGroupId: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"sg-0a59900b52ced5e10\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEC2InternetGatewayAttachment\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eigw-0acfb474f1fd71375\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e -\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003evpc-0be5d310ab44c239a\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [DefaultVPC: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"true\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eus-east-1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eSQSQueue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttps://sqs.us-east-1.amazonaws.com/777777777777/example-sqs\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIAMSAMLProvider\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003earn:aws:iam::777777777777:saml-provider/AWSSSO_254abb4071f10b25_DO_NOT_DELETE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIAMOpenIDConnectProvider\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003earn:aws:iam::777777777777:oidc-provider/app.terraform.io\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [Arn: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"arn:aws:iam::777777777777:oidc-provider/app.terraform.io\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIAMPolicy\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003earn:aws:iam::777777777777:policy/tfc-agent-access-policy\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [ARN: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"arn:aws:iam::777777777777:policy/tfc-agent-access-policy\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eName:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"tfc-agent-access-policy\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePath:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"/\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePolicyID:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"ANPA2T6PZOBNWI76TKQRF\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIAMRole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003etfc-agent\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [CreateDate: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"2023-04-02T17:55:23Z\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eLastUsedDate:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"2023-06-22T13:45:02Z\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eName:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"tfc-agent\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePath:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"/\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIAMRolePolicyAttachment\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003etfc-agent\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e -\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003etfc-agent-access-policy\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [PolicyArn: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"arn:aws:iam::777777777777:policy/tfc-agent-access-policy\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePolicyName:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"tfc-agent-access-policy\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRoleCreateDate:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"2023-04-02T17:55:23Z\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRoleLastUsed:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"2023-06-22T13:45:02Z\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRoleName:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"tfc-agent\",\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRolePath:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"/\"]\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eremove\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eScan\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecomplete:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e85\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003etotal,\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e19\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enukeable,\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e66\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003efiltered.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eThe\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eabove\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eresources\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewould\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ebe\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003edeleted\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewith\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ethe\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esupplied\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econfiguration.\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eProvide\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--no-dry-run\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eactually\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003edestroy\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eresources.\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis is great, it fully scanned the account and found every resource to delete!\nIt even wants to delete the DefaultVPC which is usually a good idea.  The one\nresource that should catch your eye that you probably do not want to delete:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003earn:aws:iam::777777777777:saml-provider/AWSSSO_254abb4071f10b25_DO_NOT_DELETE\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAWS clearly doesn't want us to delete that!\u003c/p\u003e\n\u003ch1\u003eFilters\u003c/h1\u003e\n\u003cp\u003eTo prevent nuke from deleting resources you want to keep you can define presets\nthat you use on each account.  So with our SSO example we want to prevent it\nfrom deleting those resources in a preset.\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003epresets\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003esso\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003efilters\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMSAMLProvider\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"regex\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"AWSSSO_.*_DO_NOT_DELETE\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMRole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"glob\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"AWSReservedSSO_*\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMRolePolicyAttachment\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"glob\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"AWSReservedSSO_*\"\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou can see in this example I'm targetting specific resource types and then\nmatching them with both \u003ccode\u003eregex\u003c/code\u003e and \u003ccode\u003eglob\u003c/code\u003e filter types. These are super\npowerful but a lot of times the simpler filters can be used.  I start with\n\u003ccode\u003econtains\u003c/code\u003e filter and then go from there:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtains\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAWSReservedSSO\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThen the other thing you may have noticed is that I was repeating\n\u003ccode\u003eAWSReservedSSO\u003c/code\u003e multiple times.  To reduce that you can use standard YAML\nanchors.   So the final config for your preset would look like this:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003epresets\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003esso\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003efilters\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003e_DEFAULT_FILTERS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"contains\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"DO_NOT_DELETE\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"contains\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"AWSReservedSSO\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMSAMLProvider\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMRole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMRolePolicyAttachment\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow we can use that preset in our accounts configuration:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eaccounts\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"presets\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esso\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eSo your final config should look something like this:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eregions\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eus-east-1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eglobal\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eaccount-blocklist\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"888888888888\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #768390\"\u003e# production\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003epresets\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003esso\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003efilters\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003e_DEFAULT_FILTERS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"contains\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"DO_NOT_DELETE\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etype\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"contains\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003evalue\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"AWSReservedSSO\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMSAMLProvider\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMRole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eIAMRolePolicyAttachment\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003eDEFAULT\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eaccounts\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"777777777777\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"presets\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003esso\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWhen you run this you should see now the resources we want to keep are filtered\nout:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eglobal\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIAMSAMLProvider\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003earn:aws:iam::777777777777:saml-provider/AWSSSO_254abb4071f10b25_DO_NOT_DELETE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003efiltered\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eby\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econfig\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOnce you are ready and have your filters in place you can run it for real!\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e❯\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eaws-nuke\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-c\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enuke.yaml\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--no-dry-run\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch1\u003eNext steps\u003c/h1\u003e\n\u003cp\u003eOne final note about it is that it does not understand the relationship between\nresources and so it could try deleting an EBS volume that is still in use by an\nEC2 instance.  There isn't a great solution for this outside of running nuke a\nfew times.\u003c/p\u003e\n\u003cp\u003eThe tool is well documented and so you can find the rest of information going to\n\u003ca href=\"https://github.com/rebuy-de/aws-nuke\"\u003ehttps://github.com/rebuy-de/aws-nuke\u003c/a\u003e!\u003c/p\u003e","category":"AWS","date":"2023-06-22T00:00:00Z","tags":["AWS","DevOps","SRE"],"title":"Wiping an AWS Account with aws-nuke"}},"__N_SSG":true},"page":"/blog/[...id]","query":{"id":["2023","nuking_aws_account"]},"buildId":"4b2g4jvUO3oHg0CC-JYye","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>