<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="alternate" type="application/rss+xml" title="sontek&#x27;s Engineering Blog" href="/rss.xml"/><title>Running a kubernetes cluster locally with kind</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/c9439d4f00292099.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c9439d4f00292099.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e3e8d9bb9a664264.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e3e8d9bb9a664264.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-2a9c662ddd7329fb.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e535547a4fdaa691.js" defer=""></script><script src="/_next/static/chunks/996-9e3c12b77542c098.js" defer=""></script><script src="/_next/static/chunks/790-a3aa35eb62ec874e.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...id%5D-13b90f409a03d315.js" defer=""></script><script src="/_next/static/Ctbo7kS6U09BPJt5o8ECV/_buildManifest.js" defer=""></script><script src="/_next/static/Ctbo7kS6U09BPJt5o8ECV/_ssgManifest.js" defer=""></script><script src="/_next/static/Ctbo7kS6U09BPJt5o8ECV/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><div class="grid"><div class="col"><header id="banner" class="body"><h1><a href="/">sontek.net</a></h1></header></div><div class="col menu"><nav><ul><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li><a href="/resume">Resume</a></li><li><a href="/about">About</a></li></ul></nav></div></div><div class="container"><article class="blog_article__NoEy4"><h1 class="util_headingXl__knZ_h">Running a kubernetes cluster locally with kind</h1><div class="util_lightText__xcqUE">Published on <time dateTime="2023-07-21T00:00:00Z">July 21, 2023</time></div><div class="util_lightText__xcqUE">Tagged with: <a class="blog_tag__RvKKS" href="/blog/tags/Linux">Linux</a><a class="blog_tag__RvKKS" href="/blog/tags/Kubernetes">Kubernetes</a><a class="blog_tag__RvKKS" href="/blog/tags/DevOps">DevOps</a><a class="blog_tag__RvKKS" href="/blog/tags/SRE">SRE</a></div><div><p>Previously I <a href="/blog/2022/local_kubeadm_cluster">showed</a> how to run kubernetes
locally with <code>kubeadm</code> and VMs but sometimes that is overkill so I wanted to
show how to run <a href="https://kind.sigs.k8s.io/">kind</a> which is "kuberetes in
docker".</p>
<h1>Creating your first cluster</h1>
<p>kind is a very flexible way to run kubernetes locally and allows you to run
single node or multinode clusters while having the flexibility to use all
the features of kubernetes success as ingress.</p>
<p>To create your first cluster it is as simple as running:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kind</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">create</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">cluster</span><span style="color: #ADBAC7">  </span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">Creating</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">cluster</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"kind"</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">...</span></span>
<span data-line=""><span style="color: #ADBAC7"> </span><span style="color: #F69D50">‚úì</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Ensuring</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">node</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">image</span><span style="color: #ADBAC7"> (kindest/node:v1.27.3) üñº </span></span>
<span data-line=""><span style="color: #ADBAC7"> </span><span style="color: #F69D50">‚úì</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Preparing</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">nodes</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">üì¶</span><span style="color: #ADBAC7">  </span></span>
<span data-line=""><span style="color: #ADBAC7"> </span><span style="color: #F69D50">‚úì</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Writing</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">configuration</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">üìú</span><span style="color: #ADBAC7"> </span></span>
<span data-line=""><span style="color: #ADBAC7"> </span><span style="color: #F69D50">‚úì</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Starting</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">control-plane</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">üïπÔ∏è</span><span style="color: #ADBAC7"> </span></span>
<span data-line=""><span style="color: #ADBAC7"> </span><span style="color: #F69D50">‚úì</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Installing</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">CNI</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">üîå</span><span style="color: #ADBAC7"> </span></span>
<span data-line=""><span style="color: #ADBAC7"> </span><span style="color: #F69D50">‚úì</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Installing</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">StorageClass</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">üíæ</span><span style="color: #ADBAC7"> </span></span>
<span data-line=""><span style="color: #F69D50">Set</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">context</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">to</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">"kind-kind"</span></span>
<span data-line=""><span style="color: #F69D50">You</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">can</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">now</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">use</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">your</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">cluster</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">with:</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">cluster-info</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--context</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kind-kind</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">Have</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">a</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">question,</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">bug,</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">or</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">feature</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">request?</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">Let</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">us</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">know!</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">https://kind.sigs.k8s.io/#community</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">üôÇ</span></span></code></pre></div>
<p>You now have a functioning kubernetes cluster and you
can view what it created:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">k</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">get</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">node</span></span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                 </span><span style="color: #96D0FF">STATUS</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">ROLES</span><span style="color: #ADBAC7">           </span><span style="color: #96D0FF">AGE</span><span style="color: #ADBAC7">     </span><span style="color: #96D0FF">VERSION</span></span>
<span data-line=""><span style="color: #F69D50">kind-control-plane</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">Ready</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">control-plane</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">4</span><span style="color: #96D0FF">m26s</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">v1.27.3</span></span></code></pre></div>
<p>You can also verify that it is running inside docker:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">docker</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ps</span></span>
<span data-line=""><span style="color: #F69D50">CONTAINER</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ID</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">IMAGE</span><span style="color: #ADBAC7">                  </span><span style="color: #96D0FF">COMMAND</span><span style="color: #ADBAC7">                  </span><span style="color: #96D0FF">CREATED</span><span style="color: #ADBAC7">         </span><span style="color: #96D0FF">STATUS</span><span style="color: #ADBAC7">         </span><span style="color: #96D0FF">PORTS</span><span style="color: #ADBAC7">                       </span><span style="color: #96D0FF">NAMES</span></span>
<span data-line=""><span style="color: #F69D50">1c3ba74dc29b</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">kindest/node:v1.27.3</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">"/usr/local/bin/entr‚Ä¶"</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">3</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">minutes</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ago</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">Up</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">3</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">minutes</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">127.0</span><span style="color: #96D0FF">.0.1:59327</span><span style="color: #ADBAC7">-</span><span style="color: #F47067">></span><span style="color: #96D0FF">6443/tcp</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">kind-control-plane</span></span></code></pre></div>
<h1>Making the cluster useful</h1>
<p>There are a few things you'll notice with the command we ran originally:</p>
<ul>
<li>It grabbed the latest kubernetes version available</li>
<li>It is running a single node cluster</li>
<li>No ingress available</li>
</ul>
<p>Luckily kind makes it really easy to customize your local cluster to be what
you want it to be by using a <code>YAML</code> configuration.</p>
<p>Create the configuration:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">kind</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">Cluster</span></span>
<span data-line=""><span style="color: #8DDB8C">apiVersion</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">kind.x-k8s.io/v1alpha4</span></span>
<span data-line=""><span style="color: #8DDB8C">nodes</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">- </span><span style="color: #8DDB8C">role</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">control-plane</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">kubeadmConfigPatches</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #F47067">|</span></span>
<span data-line=""><span style="color: #96D0FF">    kind: InitConfiguration</span></span>
<span data-line=""><span style="color: #96D0FF">    nodeRegistration:</span></span>
<span data-line=""><span style="color: #96D0FF">      kubeletExtraArgs:</span></span>
<span data-line=""><span style="color: #96D0FF">        node-labels: "ingress-ready=true"</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">extraPortMappings</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #8DDB8C">containerPort</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">80</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">hostPort</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">80</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">protocol</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">TCP</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #8DDB8C">containerPort</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">443</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">hostPort</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">443</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">protocol</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">TCP</span></span>
<span data-line=""><span style="color: #ADBAC7">- </span><span style="color: #8DDB8C">role</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">worker</span></span>
<span data-line=""><span style="color: #ADBAC7">- </span><span style="color: #8DDB8C">role</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">worker</span></span>
<span data-line=""><span style="color: #ADBAC7">- </span><span style="color: #8DDB8C">role</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">worker</span></span></code></pre></div>
<p>With this we've now generated a 4 node cluster where we have a single
control-plane and three workers.  Then we defined some extra configuration on
the control-plane:</p>
<ul>
<li><strong>kubeadmConfigPatches</strong>: We want to change the default configuration the
cluster uses so it'll tag the nodes with the <code>ingress-ready</code> label so the
controller will use them.</li>
<li><strong>extraPortMappings</strong>: allow the local host to make requests to the Ingress controller over ports 80/443</li>
<li><strong>node-labels</strong>: only allow the ingress controller to run on specific node(s) matching the label selector</li>
</ul>
<p>So now we can create the new cluster with the configuration. Save that config
as <code>kind_config.yml</code> and then run:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kind</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">create</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">cluster</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--image</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kindest/node:v1.25.11</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--config</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kind_config.yml</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--name</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kind-multinode</span></span></code></pre></div>
<p>This time I've added a few additional flags on the commandline. <code>--image</code>
allows us to use a different version of kubernetes and <code>--name</code> allows us to
make more than one cluster. So if you didn't destroy the first cluster you'll
see we have two of them now:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kind</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">get</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">clusters</span></span>
<span data-line=""><span style="color: #F69D50">kind</span></span>
<span data-line=""><span style="color: #F69D50">kind-multinode</span></span></code></pre></div>
<p>but <code>kind</code> will swap the to the newest cluster by default:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">config</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">current-context</span></span>
<span data-line=""><span style="color: #F69D50">kind-kind-multinode</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">get</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">node</span></span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                           </span><span style="color: #96D0FF">STATUS</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">ROLES</span><span style="color: #ADBAC7">           </span><span style="color: #96D0FF">AGE</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">VERSION</span></span>
<span data-line=""><span style="color: #F69D50">kind-multinode-control-plane</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">Ready</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">control-plane</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">107</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">v1.25.11</span></span>
<span data-line=""><span style="color: #F69D50">kind-multinode-worker</span><span style="color: #ADBAC7">          </span><span style="color: #96D0FF">Ready</span><span style="color: #ADBAC7">    </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">88</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">v1.25.11</span></span>
<span data-line=""><span style="color: #F69D50">kind-multinode-worker2</span><span style="color: #ADBAC7">         </span><span style="color: #96D0FF">Ready</span><span style="color: #ADBAC7">    </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">88</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">v1.25.11</span></span>
<span data-line=""><span style="color: #F69D50">kind-multinode-worker3</span><span style="color: #ADBAC7">         </span><span style="color: #96D0FF">Ready</span><span style="color: #ADBAC7">    </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">88</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">v1.25.11</span></span></code></pre></div>
<p>Now we need to get the <code>ingress-nginx</code> controller installed so we can start
using our cluster with ingress:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">apply</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-f</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml</span></span></code></pre></div>
<p>The manifests contains <code>kind</code> specific patches to forward the hostPorts to the ingress controller, set taint tolerations and schedule it to the custom labelled node.</p>
<p>This will take a little bit of time to get up and running, you can monitor it
by running:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">wait</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">--namespace</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ingress-nginx</span><span style="color: #ADBAC7"> </span><span style="color: #F47067">\</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #6CB6FF">--for=condition=ready</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">pod</span><span style="color: #ADBAC7"> </span><span style="color: #F47067">\</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #6CB6FF">--selector=app.kubernetes.io/component=controller</span><span style="color: #ADBAC7"> </span><span style="color: #F47067">\</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #6CB6FF">--timeout=90s</span></span></code></pre></div>
<p>or just manually check the status:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">get</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">all</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-n</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">ingress-nginx</span></span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                                            </span><span style="color: #96D0FF">READY</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">STATUS</span><span style="color: #ADBAC7">              </span><span style="color: #96D0FF">RESTARTS</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">AGE</span></span>
<span data-line=""><span style="color: #F69D50">pod/ingress-nginx-admission-create-bbmlc</span><span style="color: #ADBAC7">        </span><span style="color: #6CB6FF">0</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">     </span><span style="color: #96D0FF">Completed</span><span style="color: #ADBAC7">           </span><span style="color: #6CB6FF">0</span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""><span style="color: #F69D50">pod/ingress-nginx-admission-patch-qlnr8</span><span style="color: #ADBAC7">         </span><span style="color: #6CB6FF">0</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">     </span><span style="color: #96D0FF">Completed</span><span style="color: #ADBAC7">           </span><span style="color: #6CB6FF">2</span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""><span style="color: #F69D50">pod/ingress-nginx-controller-5f748f78c8-6tc6b</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">0</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">     </span><span style="color: #96D0FF">ContainerCreating</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">0</span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                                         </span><span style="color: #96D0FF">TYPE</span><span style="color: #ADBAC7">        </span><span style="color: #96D0FF">CLUSTER-IP</span><span style="color: #ADBAC7">      </span><span style="color: #96D0FF">EXTERNAL-IP</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">PORT</span><span style="color: #ADBAC7">(</span><span style="color: #F69D50">S</span><span style="color: #ADBAC7">)                      </span><span style="color: #96D0FF">AGE</span></span>
<span data-line=""><span style="color: #F69D50">service/ingress-nginx-controller</span><span style="color: #ADBAC7">             </span><span style="color: #96D0FF">NodePort</span><span style="color: #ADBAC7">    </span><span style="color: #6CB6FF">10.96</span><span style="color: #96D0FF">.228.248</span><span style="color: #ADBAC7">   </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">        </span><span style="color: #6CB6FF">80</span><span style="color: #96D0FF">:31771/TCP,443:31759/TCP</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""><span style="color: #F69D50">service/ingress-nginx-controller-admission</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">ClusterIP</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">10.96</span><span style="color: #96D0FF">.180.126</span><span style="color: #ADBAC7">   </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">        </span><span style="color: #6CB6FF">443</span><span style="color: #96D0FF">/TCP</span><span style="color: #ADBAC7">                      </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                                       </span><span style="color: #96D0FF">READY</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">UP-TO-DATE</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">AVAILABLE</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">AGE</span></span>
<span data-line=""><span style="color: #F69D50">deployment.apps/ingress-nginx-controller</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">0</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">     </span><span style="color: #6CB6FF">1</span><span style="color: #ADBAC7">            </span><span style="color: #6CB6FF">0</span><span style="color: #ADBAC7">           </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                                                  </span><span style="color: #96D0FF">DESIRED</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">CURRENT</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">READY</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">AGE</span></span>
<span data-line=""><span style="color: #F69D50">replicaset.apps/ingress-nginx-controller-5f748f78c8</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">1</span><span style="color: #ADBAC7">         </span><span style="color: #6CB6FF">1</span><span style="color: #ADBAC7">         </span><span style="color: #6CB6FF">0</span><span style="color: #ADBAC7">       </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                                       </span><span style="color: #96D0FF">COMPLETIONS</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">DURATION</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">AGE</span></span>
<span data-line=""><span style="color: #F69D50">job.batch/ingress-nginx-admission-create</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">1</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">           </span><span style="color: #6CB6FF">22</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">        </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span>
<span data-line=""><span style="color: #F69D50">job.batch/ingress-nginx-admission-patch</span><span style="color: #ADBAC7">    </span><span style="color: #6CB6FF">1</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">           </span><span style="color: #6CB6FF">35</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">        </span><span style="color: #6CB6FF">68</span><span style="color: #96D0FF">s</span></span></code></pre></div>
<p>Once <code>ingress-nginx-controller</code> is in <code>Running</code> state you are read to go!</p>
<h1>Deploying your first app</h1>
<p>To prove that the cluster is working correctly we will deploy
<a href="https://github.com/Kong/httpbin">httpbin</a> which is a nice little API server
so we can prove everything is working.</p>
<p>Create a <code>httbin.yml</code> file and paste this into it:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #6CB6FF">---</span></span>
<span data-line=""><span style="color: #8DDB8C">apiVersion</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">v1</span></span>
<span data-line=""><span style="color: #8DDB8C">kind</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">Service</span></span>
<span data-line=""><span style="color: #8DDB8C">metadata</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">name</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">labels</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">app</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">service</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #8DDB8C">spec</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">ports</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #8DDB8C">name</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">http</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">port</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">8000</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">targetPort</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">8080</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">selector</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">app</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #6CB6FF">---</span></span>
<span data-line=""><span style="color: #8DDB8C">apiVersion</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">apps/v1</span></span>
<span data-line=""><span style="color: #8DDB8C">kind</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">Deployment</span></span>
<span data-line=""><span style="color: #8DDB8C">metadata</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">name</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #8DDB8C">spec</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">replicas</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">2</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">selector</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">matchLabels</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">app</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">version</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">v1</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">template</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">metadata</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">labels</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">app</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">version</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">v1</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">spec</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">containers</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #8DDB8C">image</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">docker.io/mccutchen/go-httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">imagePullPolicy</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">IfNotPresent</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">name</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">ports</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">        - </span><span style="color: #8DDB8C">containerPort</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">8080</span></span></code></pre></div>
<p>This is creating a couple of Kubernetes resources:</p>
<ul>
<li><code>Service</code>: This is exposing the port to the ingress</li>
<li><code>Deployment</code>: This is actually launching the service</li>
</ul>
<p>So we are not using the ingress yet but we can prove that we can launch the
service at least.  So apply those manifests:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">apply</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-f</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">httpbin.yml</span><span style="color: #ADBAC7"> </span></span>
<span data-line=""><span style="color: #F69D50">service/httpbin</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">created</span></span>
<span data-line=""><span style="color: #F69D50">deployment.apps/httpbin</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">created</span></span></code></pre></div>
<p>You should see two pods come up.  You should wait for them to get into the
<code>Running</code> status:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">get</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">pod</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">-o</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">wide</span></span>
<span data-line=""><span style="color: #F69D50">NAME</span><span style="color: #ADBAC7">                      </span><span style="color: #96D0FF">READY</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">STATUS</span><span style="color: #ADBAC7">    </span><span style="color: #96D0FF">RESTARTS</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">AGE</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">IP</span><span style="color: #ADBAC7">           </span><span style="color: #96D0FF">NODE</span><span style="color: #ADBAC7">                     </span><span style="color: #96D0FF">NOMINATED</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">NODE</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">READINESS</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">GATES</span></span>
<span data-line=""><span style="color: #F69D50">httpbin-5c5494967-2z5wz</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">1</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">     </span><span style="color: #96D0FF">Running</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">0</span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">48</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">10.244</span><span style="color: #96D0FF">.3.3</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">kind-multinode-worker3</span><span style="color: #ADBAC7">   </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">           </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span></span>
<span data-line=""><span style="color: #F69D50">httpbin-5c5494967-9lf47</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">1</span><span style="color: #96D0FF">/1</span><span style="color: #ADBAC7">     </span><span style="color: #96D0FF">Running</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">0</span><span style="color: #ADBAC7">          </span><span style="color: #6CB6FF">72</span><span style="color: #96D0FF">s</span><span style="color: #ADBAC7">   </span><span style="color: #6CB6FF">10.244</span><span style="color: #96D0FF">.1.2</span><span style="color: #ADBAC7">   </span><span style="color: #96D0FF">kind-multinode-worker</span><span style="color: #ADBAC7">    </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span><span style="color: #ADBAC7">           </span><span style="color: #F47067">&#x3C;</span><span style="color: #96D0FF">non</span><span style="color: #ADBAC7">e</span><span style="color: #F47067">></span></span></code></pre></div>
<p>We can now use port forwarding to access it. <code>httpbin</code> is exposed on <code>8000</code> so
lets create port <code>9000</code> on our host that forwards to it:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">kubectl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">port-forward</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">service/httpbin</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">9000</span><span style="color: #96D0FF">:8000</span></span>
<span data-line=""><span style="color: #F69D50">Forwarding</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">from</span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">127.0</span><span style="color: #96D0FF">.0.1:9000</span><span style="color: #ADBAC7"> -</span><span style="color: #F47067">></span><span style="color: #ADBAC7"> </span><span style="color: #6CB6FF">80</span></span>
<span data-line=""><span style="color: #F69D50">Forwarding</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">from</span><span style="color: #ADBAC7"> [::1]:9000 -</span><span style="color: #F47067">></span><span style="color: #ADBAC7"> 80</span></span></code></pre></div>
<p>You can access it via:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">curl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">localhost:9000/get</span><span style="color: #ADBAC7"> </span></span>
<span data-line=""><span style="color: #ADBAC7">{</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #F69D50">"args"</span><span style="color: #6CB6FF">:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">{},</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #F69D50">"headers"</span><span style="color: #6CB6FF">:</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">{</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #F69D50">"Accept"</span><span style="color: #6CB6FF">:</span><span style="color: #ADBAC7"> [</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #F69D50">"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8"</span></span>
<span data-line=""><span style="color: #ADBAC7">    ],</span></span>
<span data-line=""><span style="color: #ADBAC7">}</span></span></code></pre></div>
<h1>Using Ingress</h1>
<p>Now to use the ingress rather than port forwarding we create one additional
resource, the <code>Ingress</code>:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="yaml" data-theme="default"><code data-language="yaml" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #8DDB8C">apiVersion</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">networking.k8s.io/v1</span></span>
<span data-line=""><span style="color: #8DDB8C">kind</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">Ingress</span></span>
<span data-line=""><span style="color: #8DDB8C">metadata</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">name</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin-ingress</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">annotations</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">    </span><span style="color: #8DDB8C">nginx.ingress.kubernetes.io/rewrite-target</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">/$2</span></span>
<span data-line=""><span style="color: #8DDB8C">spec</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">ingressClassName</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">nginx</span></span>
<span data-line=""><span style="color: #ADBAC7">  </span><span style="color: #8DDB8C">rules</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">  - </span><span style="color: #8DDB8C">http</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      </span><span style="color: #8DDB8C">paths</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">      - </span><span style="color: #8DDB8C">path</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">/httpbin(/|$)(.*)</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">pathType</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">ImplementationSpecific</span></span>
<span data-line=""><span style="color: #ADBAC7">        </span><span style="color: #8DDB8C">backend</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">          </span><span style="color: #8DDB8C">service</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">            </span><span style="color: #8DDB8C">name</span><span style="color: #ADBAC7">: </span><span style="color: #96D0FF">httpbin</span></span>
<span data-line=""><span style="color: #ADBAC7">            </span><span style="color: #8DDB8C">port</span><span style="color: #ADBAC7">:</span></span>
<span data-line=""><span style="color: #ADBAC7">              </span><span style="color: #8DDB8C">number</span><span style="color: #ADBAC7">: </span><span style="color: #6CB6FF">8000</span></span></code></pre></div>
<p>There are a few critical options here.  The first is the annotation to rewrite
the path so it doesn't include <code>/httpbin/</code> when it sends the request to the
service and then the <code>path</code> and <code>pathType</code> so it knows which paths to send to
which service.</p>
<p>Now you should be able to hit your local host and get routed to your
kubernetes service:</p>
<div data-rehype-pretty-code-fragment=""><pre class="github-dark-dimmed" style="background-color: #22272e" tabindex="0" data-language="bash" data-theme="default"><code data-language="bash" data-theme="default" style="display: grid;"><span data-line=""><span style="color: #F69D50">‚ùØ</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">curl</span><span style="color: #ADBAC7"> </span><span style="color: #96D0FF">localhost/httpbin/get</span></span></code></pre></div>
<p>Success!  Now you have a multinode kubernetes cluster that has an ingress
controller!</p>
<h1>Next Steps</h1>
<p>The cluster can be used like a production cluster now for local
development!  You could setup Grafana, ArgoCD, etc. to run
inside the cluster.</p></div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":["2023","local_k8s_with_kind"],"path":"2023/local_k8s_with_kind","contentHtml":"\u003cp\u003ePreviously I \u003ca href=\"/blog/2022/local_kubeadm_cluster\"\u003eshowed\u003c/a\u003e how to run kubernetes\nlocally with \u003ccode\u003ekubeadm\u003c/code\u003e and VMs but sometimes that is overkill so I wanted to\nshow how to run \u003ca href=\"https://kind.sigs.k8s.io/\"\u003ekind\u003c/a\u003e which is \"kuberetes in\ndocker\".\u003c/p\u003e\n\u003ch1\u003eCreating your first cluster\u003c/h1\u003e\n\u003cp\u003ekind is a very flexible way to run kubernetes locally and allows you to run\nsingle node or multinode clusters while having the flexibility to use all\nthe features of kubernetes success as ingress.\u003c/p\u003e\n\u003cp\u003eTo create your first cluster it is as simple as running:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecluster\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eCreating\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecluster\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"kind\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e‚úì\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEnsuring\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enode\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eimage\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e (kindest/node:v1.27.3) üñº \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e‚úì\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePreparing\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enodes\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eüì¶\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e‚úì\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eWriting\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econfiguration\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eüìú\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e‚úì\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eStarting\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtrol-plane\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eüïπÔ∏è\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e‚úì\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eInstalling\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCNI\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eüîå\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e‚úì\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eInstalling\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eStorageClass\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eüíæ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eSet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtext\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eto\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"kind-kind\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eYou\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecan\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enow\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003euse\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eyour\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecluster\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewith:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecluster-info\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--context\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind-kind\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eHave\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003equestion,\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ebug,\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eor\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003efeature\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003erequest?\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eLet\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eus\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eknow!\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttps://kind.sigs.k8s.io/#community\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eüôÇ\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou now have a functioning kubernetes cluster and you\ncan view what it created:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ek\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eget\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enode\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                 \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eSTATUS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eROLES\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eVERSION\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-control-plane\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eReady\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtrol-plane\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e4\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003em26s\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1.27.3\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou can also verify that it is running inside docker:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003edocker\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eps\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eCONTAINER\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eID\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIMAGE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCOMMAND\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                  \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCREATED\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eSTATUS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePORTS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                       \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eNAMES\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e1c3ba74dc29b\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekindest/node:v1.27.3\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e\"/usr/local/bin/entr‚Ä¶\"\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eminutes\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eago\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eUp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e3\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eminutes\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e127.0\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e.0.1:59327\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e-\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e6443/tcp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind-control-plane\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch1\u003eMaking the cluster useful\u003c/h1\u003e\n\u003cp\u003eThere are a few things you'll notice with the command we ran originally:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt grabbed the latest kubernetes version available\u003c/li\u003e\n\u003cli\u003eIt is running a single node cluster\u003c/li\u003e\n\u003cli\u003eNo ingress available\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLuckily kind makes it really easy to customize your local cluster to be what\nyou want it to be by using a \u003ccode\u003eYAML\u003c/code\u003e configuration.\u003c/p\u003e\n\u003cp\u003eCreate the configuration:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCluster\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind.x-k8s.io/v1alpha4\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003enodes\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e- \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003erole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtrol-plane\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ekubeadmConfigPatches\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e|\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #96D0FF\"\u003e    kind: InitConfiguration\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #96D0FF\"\u003e    nodeRegistration:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #96D0FF\"\u003e      kubeletExtraArgs:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #96D0FF\"\u003e        node-labels: \"ingress-ready=true\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eextraPortMappings\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003econtainerPort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e80\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ehostPort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e80\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eprotocol\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eTCP\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003econtainerPort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e443\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ehostPort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e443\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eprotocol\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eTCP\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e- \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003erole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eworker\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e- \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003erole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eworker\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e- \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003erole\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eworker\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWith this we've now generated a 4 node cluster where we have a single\ncontrol-plane and three workers.  Then we defined some extra configuration on\nthe control-plane:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ekubeadmConfigPatches\u003c/strong\u003e: We want to change the default configuration the\ncluster uses so it'll tag the nodes with the \u003ccode\u003eingress-ready\u003c/code\u003e label so the\ncontroller will use them.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eextraPortMappings\u003c/strong\u003e: allow the local host to make requests to the Ingress controller over ports 80/443\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003enode-labels\u003c/strong\u003e: only allow the ingress controller to run on specific node(s) matching the label selector\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSo now we can create the new cluster with the configuration. Save that config\nas \u003ccode\u003ekind_config.yml\u003c/code\u003e and then run:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecluster\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--image\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekindest/node:v1.25.11\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--config\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind_config.yml\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--name\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind-multinode\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis time I've added a few additional flags on the commandline. \u003ccode\u003e--image\u003c/code\u003e\nallows us to use a different version of kubernetes and \u003ccode\u003e--name\u003c/code\u003e allows us to\nmake more than one cluster. So if you didn't destroy the first cluster you'll\nsee we have two of them now:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eget\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eclusters\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-multinode\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003ebut \u003ccode\u003ekind\u003c/code\u003e will swap the to the newest cluster by default:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecurrent-context\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-kind-multinode\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eget\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enode\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                           \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eSTATUS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eROLES\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eVERSION\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-multinode-control-plane\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eReady\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003econtrol-plane\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e107\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1.25.11\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-multinode-worker\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eReady\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e88\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1.25.11\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-multinode-worker2\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eReady\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e88\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1.25.11\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekind-multinode-worker3\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eReady\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e88\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1.25.11\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow we need to get the \u003ccode\u003eingress-nginx\u003c/code\u003e controller installed so we can start\nusing our cluster with ingress:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eapply\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-f\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttps://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe manifests contains \u003ccode\u003ekind\u003c/code\u003e specific patches to forward the hostPorts to the ingress controller, set taint tolerations and schedule it to the custom labelled node.\u003c/p\u003e\n\u003cp\u003eThis will take a little bit of time to get up and running, you can monitor it\nby running:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewait\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--namespace\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eingress-nginx\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--for=condition=ready\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003epod\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--selector=app.kubernetes.io/component=controller\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e--timeout=90s\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eor just manually check the status:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eget\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eall\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-n\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eingress-nginx\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                                            \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eREADY\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eSTATUS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRESTARTS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003epod/ingress-nginx-admission-create-bbmlc\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCompleted\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003epod/ingress-nginx-admission-patch-qlnr8\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCompleted\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003epod/ingress-nginx-controller-5f748f78c8-6tc6b\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eContainerCreating\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                                         \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eTYPE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCLUSTER-IP\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eEXTERNAL-IP\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ePORT\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003eS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e)                      \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eservice/ingress-nginx-controller\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e             \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eNodePort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e10.96\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e.228.248\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e80\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e:31771/TCP,443:31759/TCP\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eservice/ingress-nginx-controller-admission\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eClusterIP\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e10.96\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e.180.126\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e443\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/TCP\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                                       \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eREADY\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eUP-TO-DATE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAVAILABLE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003edeployment.apps/ingress-nginx-controller\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                                                  \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDESIRED\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCURRENT\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eREADY\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ereplicaset.apps/ingress-nginx-controller-5f748f78c8\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e         \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e       \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                                       \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eCOMPLETIONS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDURATION\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ejob.batch/ingress-nginx-admission-create\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e22\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ejob.batch/ingress-nginx-admission-patch\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e35\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e68\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOnce \u003ccode\u003eingress-nginx-controller\u003c/code\u003e is in \u003ccode\u003eRunning\u003c/code\u003e state you are read to go!\u003c/p\u003e\n\u003ch1\u003eDeploying your first app\u003c/h1\u003e\n\u003cp\u003eTo prove that the cluster is working correctly we will deploy\n\u003ca href=\"https://github.com/Kong/httpbin\"\u003ehttpbin\u003c/a\u003e which is a nice little API server\nso we can prove everything is working.\u003c/p\u003e\n\u003cp\u003eCreate a \u003ccode\u003ehttbin.yml\u003c/code\u003e file and paste this into it:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #6CB6FF\"\u003e---\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eService\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003emetadata\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003elabels\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eservice\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003espec\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eports\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttp\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eport\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e8000\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etargetPort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e8080\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eselector\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #6CB6FF\"\u003e---\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eapps/v1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eDeployment\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003emetadata\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003espec\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ereplicas\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eselector\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ematchLabels\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003etemplate\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003emetadata\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003elabels\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eversion\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ev1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003espec\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003econtainers\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eimage\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003edocker.io/mccutchen/go-httpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eimagePullPolicy\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIfNotPresent\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eports\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003econtainerPort\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e8080\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis is creating a couple of Kubernetes resources:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eService\u003c/code\u003e: This is exposing the port to the ingress\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDeployment\u003c/code\u003e: This is actually launching the service\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSo we are not using the ingress yet but we can prove that we can launch the\nservice at least.  So apply those manifests:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eapply\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-f\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin.yml\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eservice/httpbin\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecreated\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003edeployment.apps/httpbin\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecreated\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou should see two pods come up.  You should wait for them to get into the\n\u003ccode\u003eRunning\u003c/code\u003e status:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eget\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003epod\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e-o\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ewide\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eNAME\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                      \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eREADY\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eSTATUS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRESTARTS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eAGE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIP\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eNODE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e                     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eNOMINATED\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eNODE\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eREADINESS\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eGATES\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ehttpbin-5c5494967-2z5wz\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRunning\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e48\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e10.244\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e.3.3\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind-multinode-worker3\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003ehttpbin-5c5494967-9lf47\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/1\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e     \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eRunning\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e72\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003es\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e10.244\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e.1.2\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e   \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekind-multinode-worker\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e           \u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enon\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003ee\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWe can now use port forwarding to access it. \u003ccode\u003ehttpbin\u003c/code\u003e is exposed on \u003ccode\u003e8000\u003c/code\u003e so\nlets create port \u003ccode\u003e9000\u003c/code\u003e on our host that forwards to it:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ekubectl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eport-forward\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eservice/httpbin\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e9000\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e:8000\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eForwarding\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e127.0\u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e.0.1:9000\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e -\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e80\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003eForwarding\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003efrom\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [::1]:9000 -\u003c/span\u003e\u003cspan style=\"color: #F47067\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e 80\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou can access it via:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecurl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003elocalhost:9000/get\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e\"args\"\u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e{},\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e\"headers\"\u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e\"Accept\"\u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #F69D50\"\u003e\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch1\u003eUsing Ingress\u003c/h1\u003e\n\u003cp\u003eNow to use the ingress rather than port forwarding we create one additional\nresource, the \u003ccode\u003eIngress\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"yaml\" data-theme=\"default\"\u003e\u003ccode data-language=\"yaml\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enetworking.k8s.io/v1\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003ekind\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eIngress\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003emetadata\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin-ingress\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eannotations\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003enginx.ingress.kubernetes.io/rewrite-target\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/$2\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #8DDB8C\"\u003espec\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eingressClassName\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003enginx\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003erules\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e  - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ehttp\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003epaths\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e      - \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003epath\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003e/httpbin(/|$)(.*)\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003epathType\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003eImplementationSpecific\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ebackend\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eservice\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003ename\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ehttpbin\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e            \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003eport\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #ADBAC7\"\u003e              \u003c/span\u003e\u003cspan style=\"color: #8DDB8C\"\u003enumber\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #6CB6FF\"\u003e8000\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThere are a few critical options here.  The first is the annotation to rewrite\nthe path so it doesn't include \u003ccode\u003e/httpbin/\u003c/code\u003e when it sends the request to the\nservice and then the \u003ccode\u003epath\u003c/code\u003e and \u003ccode\u003epathType\u003c/code\u003e so it knows which paths to send to\nwhich service.\u003c/p\u003e\n\u003cp\u003eNow you should be able to hit your local host and get routed to your\nkubernetes service:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre class=\"github-dark-dimmed\" style=\"background-color: #22272e\" tabindex=\"0\" data-language=\"bash\" data-theme=\"default\"\u003e\u003ccode data-language=\"bash\" data-theme=\"default\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color: #F69D50\"\u003e‚ùØ\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003ecurl\u003c/span\u003e\u003cspan style=\"color: #ADBAC7\"\u003e \u003c/span\u003e\u003cspan style=\"color: #96D0FF\"\u003elocalhost/httpbin/get\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eSuccess!  Now you have a multinode kubernetes cluster that has an ingress\ncontroller!\u003c/p\u003e\n\u003ch1\u003eNext Steps\u003c/h1\u003e\n\u003cp\u003eThe cluster can be used like a production cluster now for local\ndevelopment!  You could setup Grafana, ArgoCD, etc. to run\ninside the cluster.\u003c/p\u003e","category":"Kubernetes","date":"2023-07-21T00:00:00Z","tags":["Linux","Kubernetes","DevOps","SRE"],"title":"Running a kubernetes cluster locally with kind"}},"__N_SSG":true},"page":"/blog/[...id]","query":{"id":["2023","local_k8s_with_kind"]},"buildId":"Ctbo7kS6U09BPJt5o8ECV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>